package org.saddle.time

import org.specs2.mutable.Specification

class RRuleStringConstructorSuite extends Specification {

  "Test from String to RRule conversion" in {

      val r1 = RRule("RRULE:FREQ=DAILY;UNTIL=19971224T000000Z")
      r1.toString must_== "RRULE:FREQ=DAILY;UNTIL=19971224T000000Z;INTERVAL=1"

      val r2 = RRule("RRULE:FREQ=DAILY;INTERVAL=2")
      r2.toString must_== "RRULE:FREQ=DAILY;INTERVAL=2"

      val r3 = RRule("RRULE:FREQ=DAILY;INTERVAL=10;COUNT=5")
      r3.toString must_== "RRULE:FREQ=DAILY;COUNT=5;INTERVAL=10"

      val r4 = RRule("RRULE:FREQ=YEARLY;UNTIL=20000131T090000Z;BYMONTH=1;BYDAY=SU,MO,TU,WE,TH,FR,SA")
      r4.toString must_== "RRULE:FREQ=YEARLY;UNTIL=20000131T090000Z;INTERVAL=1;BYMONTH=1;BYDAY=SU,MO,TU,WE,TH,FR,SA"

      val r5 = RRule("RRULE:FREQ=DAILY;UNTIL=20000131T090000Z;BYMONTH=1")
      r5.toString must_== "RRULE:FREQ=DAILY;UNTIL=20000131T090000Z;INTERVAL=1;BYMONTH=1"

      val r6 = RRule("RRULE:FREQ=WEEKLY;COUNT=10")
      r6.toString must_== "RRULE:FREQ=WEEKLY;COUNT=10;INTERVAL=1"

      val r7 = RRule("RRULE:FREQ=WEEKLY;INTERVAL=2;UNTIL=19971224T000000Z;WKST=SU;")
      r7.toString must_== "RRULE:FREQ=WEEKLY;WKST=SU;UNTIL=19971224T000000Z;INTERVAL=2"

      val r8 = RRule("RRULE:FREQ=MONTHLY;BYMONTHDAY=-3")
      r8.toString must_== "RRULE:FREQ=MONTHLY;INTERVAL=1;BYMONTHDAY=-3"

      val r9 = RRule("RRULE:FREQ=YEARLY;INTERVAL=3;COUNT=10;BYYEARDAY=1,100,200")
      r9.toString must_== "RRULE:FREQ=YEARLY;COUNT=10;INTERVAL=3;BYYEARDAY=1,100,200"

      val r10 = RRule("RRULE:FREQ=YEARLY;BYWEEKNO=20;BYDAY=MO")
      r10.toString must_== "RRULE:FREQ=YEARLY;INTERVAL=1;BYWEEKNO=20;BYDAY=MO"

      val r11 = RRule("RRULE:FREQ=YEARLY;INTERVAL=4;BYMONTH=11;BYDAY=TU;BYMONTHDAY=2,3,4,5,6,7,8")
      r11.toString must_== "RRULE:FREQ=YEARLY;INTERVAL=4;BYMONTH=11;BYMONTHDAY=2,3,4,5,6,7,8;BYDAY=TU"

      val r12 = RRule("RRULE:FREQ=MONTHLY;BYDAY=MO,TU,WE,TH,FR;BYSETPOS=-2")
      r12.toString must_== "RRULE:FREQ=MONTHLY;INTERVAL=1;BYDAY=MO,TU,WE,TH,FR;BYSETPOS=-2"

      val r13 = RRule("RRULE:FREQ=DAILY;BYHOUR=9,10,11,12,13,14,15,16;BYMINUTE=0,20,40")
      r13.toString must_== "RRULE:FREQ=DAILY;INTERVAL=1;BYHOUR=9,10,11,12,13,14,15,16;BYMINUTE=0,20,40"

      val r14 = RRule("RRULE:FREQ=MINUTELY;INTERVAL=20;BYHOUR=9,10,11,12,13,14,15,16")
      r14.toString must_== "RRULE:FREQ=MINUTELY;INTERVAL=20;BYHOUR=9,10,11,12,13,14,15,16"

  }
}